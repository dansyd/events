<div class="main-heading">
  <h1>Browse all the events</h1>

  <div class="events-search">
    <%= form_tag events_path, :method => 'get' do %>
      <div class="form-group">
        <%= label_tag 'Start date' %>
        <%= text_field_tag :start_datetime,nil, :placeholder => 'Select date', :class => 'flatpickr', :id => 'search_start_date' %>
      </div>

      <div class="form-group">
        <%= label_tag 'End date' %>
        <%= text_field_tag :end_datetime, nil, :placeholder => 'Select date', :class => 'flatpickr', :id => 'search_end_date' %>
      </div>

        <%= button_tag 'Search' %>

    <% end %>
  </div>
</div>

<div class="container-fluid">
    <div class="row row-no-padding">
      <% @events.each do |event| %>
      <div class="col-md-6 event-tile">
        <header class="event-name">
          <h2><%= event.name %></h2>
        </header>
        <%= link_to(event_path(event.id)) do %>
          <div class="event-img" style='background-image: url("<%= cloudinary_url(event.image ) %>")'>
          </div>
        <% end %>
        <div class="container-fluid">
          <div class="event-details row">
            <% if @current_user.present? %>
              <div class="col-lg-8 col-md-6">
            <% else %>
              <div class="col-md-12">
            <% end %>
              <span class="event-datetime"><%= "#{ event.start_datetime.strftime('%a %d %b, %l:%M %p') } - #{ event.end_datetime.strftime('%a %d %b, %l:%M %p') }" %> </span>
            </div>
            <% if @current_user.present? %>
              <div class="col-lg-4 col-md-6 status-wrapper">
                <%= render :partial => 'attending_status', :locals => { :event => event } %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
      <% end %>
    </div>
</div>
